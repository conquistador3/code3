#include <bits/stdc++.h>
using namespace std;
int main()
{
    int i,n,m,c=0,j,t,tt,cc=0;
    queue <int> q,qq;
    scanf("%d%d",&n,&m);
    char ch[n][m],source,k;
       for(j=0;j<n;j++)
     {
       scanf("%s",ch[j]);}
     vector < vector  < int  > > visited( n, vector < int > (m, 0));
     for(i=0;i<n;i++)
     {
         for(j=0;j<m;j++)
         {
             source=ch[i][j];
             if(visited[i][j]==0)
             {
                 c++;
                 cc++;
                 visited[i][j]==c;
                 q.push(i);
                 qq.push(j);
                 while(!q.empty())
                 {
                     t=q.front();
                     tt=qq.front();
                     k=ch[t][tt];
                     q.pop();
                     qq.pop();
                     if(k=='S')
                     {
                         if(t+1>=0)
                         {
                             if(visited[t+1][tt]==0)
                             {
                                 visited[t+1][tt]=c;
                                 q.push(t+1);
                                 qq.push(tt);
                             }
                             else
                             {
                                 if(visited[t+1][tt]!=c)
                                    cc--;
                             }
                         }
                     }
                     if(k=='N')
                     {
                         if(t-1<n)
                         {
                             if(visited[t-1][tt]==0)
                             {
                                 visited[t-1][tt]=c;
                                 q.push(t-1);
                                 qq.push(tt);
                             }

                         else
                             {
                                 if(visited[t-1][tt]!=c)
                                    cc--;
                             }
                     }

                 }
                 if(k=='E')
                     {
                         if(tt+1<m)
                         {
                             if(visited[t][tt+1]==0)
                             {
                                 visited[t][tt+1]=c;
                                 q.push(t);
                                 qq.push(tt+1);
                             }

                         else
                             {
                                 if(visited[t][tt+1]!=c)
                                    cc--;
                             }
                     }
                     }
                     if(k=='W')
                     {
                         if(tt-1>=0)
                         {
                             if(visited[t][tt-1]==0)
                             {
                                 visited[t][tt-1]=c;
                                 q.push(t);
                                 qq.push(tt-1);
                             }

                         else
                             {
                                 if(visited[t][tt-1]!=c)
                                    cc--;
                             }
                     }
                     }

                 }
             }
         }
     }
     cout<<cc;
    return 0;
}
